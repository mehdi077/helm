@import "tailwindcss";
@plugin "@tailwindcss/typography";

:root {
  --background: #000000;
  --foreground: #ffffff;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* 
@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}
*/

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* AI Completion Ghost Styles */
.completion-ghost {
  color: #60a5fa;
  opacity: 0.5;
}

/* Completion mode indicator */
.completion-active .ProseMirror {
  caret-color: #60a5fa;
}

/* AI Generation Loading Animation */
.ai-loading-indicator {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  vertical-align: middle;
  z-index: 100;
}

.ai-loading-indicator.absolute {
  transform: translateY(-50%);
}

.ai-loading-indicator .orbit-container {
  position: relative;
  width: 20px;
  height: 20px;
}

.ai-loading-indicator .orbit-dot {
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: #60a5fa;
}

.ai-loading-indicator .orbit-dot:nth-child(1) {
  animation: orbit1 1.2s ease-in-out infinite;
}

.ai-loading-indicator .orbit-dot:nth-child(2) {
  animation: orbit2 1.2s ease-in-out infinite;
  animation-delay: 0.4s;
}

.ai-loading-indicator .orbit-dot:nth-child(3) {
  animation: orbit3 1.2s ease-in-out infinite;
  animation-delay: 0.8s;
}

@keyframes orbit1 {
  0%, 100% {
    top: 50%;
    left: 0;
    transform: translate(0, -50%) scale(1);
    opacity: 1;
    background: #60a5fa;
  }
  33% {
    top: 0;
    left: 50%;
    transform: translate(-50%, 0) scale(1.2);
    opacity: 0.8;
    background: #a78bfa;
  }
  66% {
    top: 50%;
    left: 100%;
    transform: translate(-100%, -50%) scale(0.8);
    opacity: 0.6;
    background: #f472b6;
  }
}

@keyframes orbit2 {
  0%, 100% {
    top: 50%;
    left: 0;
    transform: translate(0, -50%) scale(1);
    opacity: 1;
    background: #60a5fa;
  }
  33% {
    top: 0;
    left: 50%;
    transform: translate(-50%, 0) scale(1.2);
    opacity: 0.8;
    background: #a78bfa;
  }
  66% {
    top: 50%;
    left: 100%;
    transform: translate(-100%, -50%) scale(0.8);
    opacity: 0.6;
    background: #f472b6;
  }
}

@keyframes orbit3 {
  0%, 100% {
    top: 50%;
    left: 0;
    transform: translate(0, -50%) scale(1);
    opacity: 1;
    background: #60a5fa;
  }
  33% {
    top: 0;
    left: 50%;
    transform: translate(-50%, 0) scale(1.2);
    opacity: 0.8;
    background: #a78bfa;
  }
  66% {
    top: 50%;
    left: 100%;
    transform: translate(-100%, -50%) scale(0.8);
    opacity: 0.6;
    background: #f472b6;
  }
}

/* Hide cursor during generation */
.generating .ProseMirror {
  caret-color: transparent;
}

/* Mobile FAB animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-subtle {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
}

/* Mobile control bar entrance animation */
.fixed.bottom-6 > div,
.fixed.bottom-6 > button {
  animation: fadeInUp 0.2s ease-out;
}

/* Subtle pulse on main FAB to draw attention */
.fixed.bottom-6 button[title="Generate AI completion"] {
  animation: pulse-subtle 2s ease-in-out infinite;
}

.fixed.bottom-6 button[title="Generate AI completion"]:hover {
  animation: none;
}

/* Editor prose overrides - fix spacing issues */
.prose.prose-invert p {
  margin-top: 0;
  margin-bottom: 0.5em;
}

.prose.prose-invert > :first-child {
  margin-top: 0;
}

.prose.prose-invert > :last-child {
  margin-bottom: 0;
}

/* Editor styling - ensure inline styles take precedence */
.editor-area .ProseMirror {
  transition: padding 0.2s ease, line-height 0.2s ease;
}

/* Override prose plugin defaults to allow dynamic control */
.editor-area .prose,
.editor-area .prose-invert,
.editor-area .prose p,
.editor-area .prose-invert p,
.editor-area .prose li,
.editor-area .prose-invert li {
  line-height: inherit !important;
}

/* Range input styling */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
}

input[type="range"]::-webkit-slider-runnable-track {
  width: 100%;
  height: 6px;
  background: #3f3f46;
  border-radius: 3px;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  margin-top: -5px;
  transition: transform 0.1s;
}

input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.1);
}

input[type="range"]::-moz-range-track {
  width: 100%;
  height: 6px;
  background: #3f3f46;
  border-radius: 3px;
}

input[type="range"]::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  border: none;
}

/* Mobile Editor Styles */
@media (max-width: 768px) {
  /* Mobile-specific adjustments - don't override inline styles */
  .ProseMirror {
    font-size: 16px !important; /* Prevents iOS zoom on focus */
    min-height: calc(100vh - 100px);
  }
  
  /* Override prose plugin's line-height to allow inline styles to work */
  .editor-area .prose,
  .editor-area .prose-invert,
  .editor-area .prose p,
  .editor-area .prose-invert p {
    line-height: inherit !important;
  }
  
  .ProseMirror p {
    margin-bottom: 0.5em;
    margin-top: 0;
  }
  
  .ProseMirror > * + * {
    margin-top: 0.25em;
  }
  
  /* Prevent large gaps in prose */
  .prose p,
  .prose-invert p {
    margin-top: 0;
    margin-bottom: 0.5em;
  }
  
  .prose > :first-child,
  .prose-invert > :first-child {
    margin-top: 0;
  }
}

/* Mobile Sidebar Overlay */
@media (max-width: 768px) {
  .sidebar-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(2px);
    z-index: 55;
    animation: fadeIn 0.2s ease-out;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
}
